<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>GridLAB-D&trade; - GUI Example 4</title>
</head>
<body onload="load();" >

<table>
<tr><td>Test of</td><td><div id="nhouses"> &ndash; </div></td><td>houses</td></tr>
</table>

<table>
<tr><th>Average floorarea</th><td><div id="avg"> &ndash; </div></td></tr>
<tr><th>Floorarea stdev</th><td><div id="std"> &ndash; </div></td></tr>
<tr><th>Clock</th><td><div id="clock"> &ndash; </div></td></tr>
</table>

<script type="text/javascript">

function GLDGetGlobal(name)
{
    xml = new XMLHttpRequest();
    xml.open("GET","/"+name,false);
    xml.send();
    doc = xml.responseXML;
    var x = doc.getElementsByTagName("globalvar")
    return x[0].getElementsByTagName("value")[0].childNodes[0].nodeValue;
}

function GLDGetProperty(object,name)
{
    xml = new XMLHttpRequest();
    xml.open("GET","/"+object+"/"+name,false);
    xml.send();
    doc = xml.responseXML;
    var x = doc.getElementsByTagName("property")
    return x[0].getElementsByTagName("value")[0].childNodes[0].nodeValue;
}

function load()
{
    document.getElementById("nhouses").innerHTML = nhouses;

    document.getElementById("avg").innerHTML = GLDGetGlobal("AVG_SF");
    document.getElementById("std").innerHTML = GLDGetGlobal("STD_SF");
    document.getElementById("clock").innerHTML = GLDGetGlobal("clock");

    for ( n=0 ; n<nhouses ; n++)
    {
        document.getElementById("tair"+n).innerHTML = GLDGetProperty("house:"+n,"air_temperature");
        document.getElementById("mode"+n).innerHTML = GLDGetProperty("house:"+n,"system_mode");
    }
    
    setTimeout("load()",1000);
}

var nhouses = GLDGetGlobal("NHOUSES");

document.writeln("<table rules='inside'>");
document.writeln("<tr><th>House</th><th>Air temperature</th><th>System mode</tr>");
for (n=0; n<nhouses; n++)
    document.writeln("<tr><td>"+n+"</td><td><div id='tair"+n+"'> &ndash; </div></td><td><div id='mode"+n+"'> &ndash; </div></td></tr>");
document.writeln("</table>");

</script>

<input type="submit" value="Quit" onclick="document.location='/action/quit'; window.close();" />

</body>
</html>