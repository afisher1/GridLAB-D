dist_pkgdata_DATA += core/tzinfo.txt
dist_pkgdata_DATA += core/unitfile.txt

GLD_SOURCES_PLACE_HOLDER = 
GLD_SOURCES_PLACE_HOLDER += core/aggregate.c
GLD_SOURCES_PLACE_HOLDER += core/aggregate.h
GLD_SOURCES_PLACE_HOLDER += core/build.h
GLD_SOURCES_PLACE_HOLDER += core/class.c
GLD_SOURCES_PLACE_HOLDER += core/class.h
GLD_SOURCES_PLACE_HOLDER += core/cmdarg.c
GLD_SOURCES_PLACE_HOLDER += core/cmdarg.h
GLD_SOURCES_PLACE_HOLDER += core/compare.c
GLD_SOURCES_PLACE_HOLDER += core/compare.h
GLD_SOURCES_PLACE_HOLDER += core/complex.h
GLD_SOURCES_PLACE_HOLDER += core/console.h
GLD_SOURCES_PLACE_HOLDER += core/convert.cpp
GLD_SOURCES_PLACE_HOLDER += core/convert.h
GLD_SOURCES_PLACE_HOLDER += core/debug.c
GLD_SOURCES_PLACE_HOLDER += core/debug.h
GLD_SOURCES_PLACE_HOLDER += core/deltamode.c
GLD_SOURCES_PLACE_HOLDER += core/deltamode.h
GLD_SOURCES_PLACE_HOLDER += core/enduse.c
GLD_SOURCES_PLACE_HOLDER += core/enduse.h
GLD_SOURCES_PLACE_HOLDER += core/environment.c
GLD_SOURCES_PLACE_HOLDER += core/environment.h
GLD_SOURCES_PLACE_HOLDER += core/exception.c
GLD_SOURCES_PLACE_HOLDER += core/exception.h
GLD_SOURCES_PLACE_HOLDER += core/exec.c
GLD_SOURCES_PLACE_HOLDER += core/exec.h
GLD_SOURCES_PLACE_HOLDER += core/find.c
GLD_SOURCES_PLACE_HOLDER += core/find.h
GLD_SOURCES_PLACE_HOLDER += core/gld_sock.h
GLD_SOURCES_PLACE_HOLDER += core/globals.c
GLD_SOURCES_PLACE_HOLDER += core/globals.h
GLD_SOURCES_PLACE_HOLDER += core/gridlabd.h
GLD_SOURCES_PLACE_HOLDER += core/gui.c
GLD_SOURCES_PLACE_HOLDER += core/gui.h
GLD_SOURCES_PLACE_HOLDER += core/http_client.c
GLD_SOURCES_PLACE_HOLDER += core/http_client.h
GLD_SOURCES_PLACE_HOLDER += core/index.c
GLD_SOURCES_PLACE_HOLDER += core/index.h
GLD_SOURCES_PLACE_HOLDER += core/instance.c
GLD_SOURCES_PLACE_HOLDER += core/instance_cnx.c
GLD_SOURCES_PLACE_HOLDER += core/instance_cnx.h
GLD_SOURCES_PLACE_HOLDER += core/instance.h
GLD_SOURCES_PLACE_HOLDER += core/instance_slave.c
GLD_SOURCES_PLACE_HOLDER += core/instance_slave.h
GLD_SOURCES_PLACE_HOLDER += core/interpolate.c
GLD_SOURCES_PLACE_HOLDER += core/interpolate.h
GLD_SOURCES_PLACE_HOLDER += core/job.cpp
GLD_SOURCES_PLACE_HOLDER += core/job.h
GLD_SOURCES_PLACE_HOLDER += core/kill.c
GLD_SOURCES_PLACE_HOLDER += core/kill.h
GLD_SOURCES_PLACE_HOLDER += core/kml.c
GLD_SOURCES_PLACE_HOLDER += core/kml.h
GLD_SOURCES_PLACE_HOLDER += core/legal.c
GLD_SOURCES_PLACE_HOLDER += core/legal.h
GLD_SOURCES_PLACE_HOLDER += core/linkage.c
GLD_SOURCES_PLACE_HOLDER += core/linkage.h
GLD_SOURCES_PLACE_HOLDER += core/link.cpp
GLD_SOURCES_PLACE_HOLDER += core/link.h
GLD_SOURCES_PLACE_HOLDER += core/list.c
GLD_SOURCES_PLACE_HOLDER += core/list.h
GLD_SOURCES_PLACE_HOLDER += core/load.c
GLD_SOURCES_PLACE_HOLDER += core/load.h
GLD_SOURCES_PLACE_HOLDER += core/loadshape.c
GLD_SOURCES_PLACE_HOLDER += core/loadshape.h
GLD_SOURCES_PLACE_HOLDER += core/load_xml.cpp
GLD_SOURCES_PLACE_HOLDER += core/load_xml.h
GLD_SOURCES_PLACE_HOLDER += core/load_xml_handle.cpp
GLD_SOURCES_PLACE_HOLDER += core/load_xml_handle.h
GLD_SOURCES_PLACE_HOLDER += core/local.c
GLD_SOURCES_PLACE_HOLDER += core/local.h
GLD_SOURCES_PLACE_HOLDER += core/lock.cpp
GLD_SOURCES_PLACE_HOLDER += core/lock.h
GLD_SOURCES_PLACE_HOLDER += core/main.c
GLD_SOURCES_PLACE_HOLDER += core/match.c
GLD_SOURCES_PLACE_HOLDER += core/match.h
GLD_SOURCES_PLACE_HOLDER += core/matlab.c
GLD_SOURCES_PLACE_HOLDER += core/matlab.h
GLD_SOURCES_PLACE_HOLDER += core/module.c
GLD_SOURCES_PLACE_HOLDER += core/module.h
GLD_SOURCES_PLACE_HOLDER += core/object.c
GLD_SOURCES_PLACE_HOLDER += core/object.h
GLD_SOURCES_PLACE_HOLDER += core/output.c
GLD_SOURCES_PLACE_HOLDER += core/output.h
GLD_SOURCES_PLACE_HOLDER += core/platform.h
GLD_SOURCES_PLACE_HOLDER += core/property.c
GLD_SOURCES_PLACE_HOLDER += core/property.h
GLD_SOURCES_PLACE_HOLDER += core/random.c
GLD_SOURCES_PLACE_HOLDER += core/random.h
GLD_SOURCES_PLACE_HOLDER += core/realtime.c
GLD_SOURCES_PLACE_HOLDER += core/realtime.h
GLD_SOURCES_PLACE_HOLDER += core/sanitize.cpp
GLD_SOURCES_PLACE_HOLDER += core/sanitize.h
GLD_SOURCES_PLACE_HOLDER += core/save.c
GLD_SOURCES_PLACE_HOLDER += core/save.h
GLD_SOURCES_PLACE_HOLDER += core/schedule.c
GLD_SOURCES_PLACE_HOLDER += core/schedule.h
GLD_SOURCES_PLACE_HOLDER += core/server.c
GLD_SOURCES_PLACE_HOLDER += core/server.h
GLD_SOURCES_PLACE_HOLDER += core/setup.cpp
GLD_SOURCES_PLACE_HOLDER += core/setup.h
GLD_SOURCES_PLACE_HOLDER += core/stream.cpp
GLD_SOURCES_PLACE_HOLDER += core/stream.h
GLD_SOURCES_PLACE_HOLDER += core/stream_type.h
GLD_SOURCES_PLACE_HOLDER += core/test.c
GLD_SOURCES_PLACE_HOLDER += core/test_callbacks.h
GLD_SOURCES_PLACE_HOLDER += core/test_framework.cpp
GLD_SOURCES_PLACE_HOLDER += core/test_framework.h
GLD_SOURCES_PLACE_HOLDER += core/test.h
GLD_SOURCES_PLACE_HOLDER += core/threadpool.c
GLD_SOURCES_PLACE_HOLDER += core/threadpool.h
GLD_SOURCES_PLACE_HOLDER += core/timestamp.c
GLD_SOURCES_PLACE_HOLDER += core/timestamp.h
GLD_SOURCES_PLACE_HOLDER += core/transform.c
GLD_SOURCES_PLACE_HOLDER += core/transform.h
GLD_SOURCES_PLACE_HOLDER += core/unit.c
GLD_SOURCES_PLACE_HOLDER += core/unit.h
GLD_SOURCES_PLACE_HOLDER += core/validate.cpp
GLD_SOURCES_PLACE_HOLDER += core/validate.h
GLD_SOURCES_PLACE_HOLDER += core/version.c
GLD_SOURCES_PLACE_HOLDER += core/version.h

GLD_SOURCES_EXTRA_PLACE_HOLDER =
GLD_SOURCES_EXTRA_PLACE_HOLDER += core/cmex.c
GLD_SOURCES_EXTRA_PLACE_HOLDER += core/cmex.h
GLD_SOURCES_EXTRA_PLACE_HOLDER += core/xcore.cpp
GLD_SOURCES_EXTRA_PLACE_HOLDER += core/xcore.h


if HAVE_MINGW

bin_SCRIPTS += core/gridlabd

bin_PROGRAMS += gridlabd

gridlabd_CPPFLAGS =
gridlabd_CPPFLAGS += $(XERCES_CPPFLAGS)
gridlabd_CPPFLAGS += $(AM_CPPFLAGS)

gridlabd_LDFLAGS =
gridlabd_LDFLAGS += $(XERCES_LDFLAGS)
gridlabd_LDFLAGS += $(AM_LDFLAGS)

gridlabd_LDADD =
gridlabd_LDADD += $(XERCES_LIB)
gridlabd_LDADD += $(CURSES_LIB)
gridlabd_LDADD += -ldl

gridlabd_SOURCES =
gridlabd_SOURCES += $(GLD_SOURCES_PLACE_HOLDER)

EXTRA_gridlabd_SOURCES =
EXTRA_gridlabd_SOURCES += $(GLD_SOURCES_EXTRA_PLACE_HOLDER)

else

bin_SCRIPTS += core/gridlabd

bin_PROGRAMS += gridlabd.bin

gridlabd_bin_CPPFLAGS =
gridlabd_bin_CPPFLAGS += $(XERCES_CPPFLAGS)
gridlabd_bin_CPPFLAGS += $(AM_CPPFLAGS)

gridlabd_bin_LDFLAGS =
gridlabd_bin_LDFLAGS += $(XERCES_LDFLAGS)
gridlabd_bin_LDFLAGS += $(AM_LDFLAGS)

gridlabd_bin_LDADD =
gridlabd_bin_LDADD += $(XERCES_LIB)
gridlabd_bin_LDADD += $(CURSES_LIB)
gridlabd_bin_LDADD += -ldl

gridlabd_bin_SOURCES =
gridlabd_bin_SOURCES += $(GLD_SOURCES_PLACE_HOLDER)

EXTRA_gridlabd_bin_SOURCES =
EXTRA_gridlabd_bin_SOURCES += $(GLD_SOURCES_EXTRA_PLACE_HOLDER)
endif

BUILT_SOURCES += core/build.h

CLEANFILES += core/build.h

pkginclude_HEADERS =
pkginclude_HEADERS += core/build.h
pkginclude_HEADERS += core/class.h
pkginclude_HEADERS += core/complex.h
pkginclude_HEADERS += core/debug.h
pkginclude_HEADERS += core/enduse.h
pkginclude_HEADERS += core/exception.h
pkginclude_HEADERS += core/loadshape.h
pkginclude_HEADERS += core/lock.h
pkginclude_HEADERS += core/module.h
pkginclude_HEADERS += core/object.h
pkginclude_HEADERS += core/property.h
pkginclude_HEADERS += core/schedule.h
pkginclude_HEADERS += core/test.h
pkginclude_HEADERS += core/version.h

core/build.h: buildnum

buildnum: utilities/build_number
	/bin/bash -c "source $(top_build_prefix)utilities/build_number $(top_srcdir) $(top_build_prefix)core/build.h"
