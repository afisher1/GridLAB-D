//TriPlex Line Self-Test
//
//Tests power in and power out of a single phase
//  triplex line configuration on each phase, with a balanced
//  load attached.

//Still needs to be tested with loads across phases 1&2

#set iteration_limit=100

clock {
	timezone EST+5EDT;
	starttime '2000-01-01 00:00:00 EST';
}

module powerflow;
module assert;

///////////////////////////////////////////////////////
// TRIPLEX LINE (TPL)
///////////////////////////////////////////////////////
// AS phase

object triplex_line {
	phases AS;
	length 100 ft;	
	configuration object triplex_line_configuration {
		conductor_1 object triplex_line_conductor {
			resistance 0.97;
			geometric_mean_radius 0.0111;		
		};
		conductor_2 object triplex_line_conductor {
			resistance 0.97;
			geometric_mean_radius 0.0111;		
		};
		conductor_N object triplex_line_conductor {
			resistance 0.97;
			geometric_mean_radius 0.0111;		
		};
		insulation_thickness 0.08 in;
		diameter 0.368 in;
	};
	from object triplex_node {
		name TPL_fAS;
		phases AS;
		voltage_1 120 + 0j;		
		voltage_2 120 + 0j;
		voltage_N 0;
		nominal_voltage 240.00;
	};
	to object triplex_node {
		name TPL_tAS;
		phases AS;
		voltage_1 120 + 0j;		
		voltage_2 120 + 0j;
		voltage_N 0;
		//current_1  1;
		power_1 1000+2000j;	
		impedance_1 1500+750j;
		nominal_voltage 240.00;
	};
	object double_assert {
		target "power_out";
		value 2242.8929;
		within 0.1;
	};
	object double_assert {
		target "power_in";
		value 2251.1186;
		within 0.1;
	};
};

// BS phase to phase 2

object triplex_line {
	phases BS;
	length 100 ft;	
	configuration object triplex_line_configuration {
		conductor_1 object triplex_line_conductor {
			resistance 0.97;
			geometric_mean_radius 0.0111;		
		};
		conductor_2 object triplex_line_conductor {
			resistance 0.97;
			geometric_mean_radius 0.0111;		
		};
		conductor_N object triplex_line_conductor {
			resistance 0.97;
			geometric_mean_radius 0.0111;		
		};
		insulation_thickness 0.08 in;
		diameter 0.368 in;
	};
	from object triplex_node {
		name TPL_fBS;
		phases BS;
		voltage_1 120 + 0j;		
		voltage_2 120 + 0j;
		voltage_N 0;
		nominal_voltage 240.00;
	};
	to object triplex_node {
		name TPL_tBS;
		phases BS;
		voltage_1 120 + 0j;		
		voltage_2 120 + 0j;
		voltage_N 0;
		//current_1  1;
		power_2 1000+2000j;	
		impedance_2 1500+750j;
		nominal_voltage 240.00;
	};
	object double_assert {
		target "power_out";
		value 2242.8929;
		within 0.1;
	};
	object double_assert {
		target "power_in";
		value 2251.1186;
		within 0.1;
	};	
};

