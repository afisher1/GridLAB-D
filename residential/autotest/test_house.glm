// $Id: residential_1home.glm 
// Copyright (C) 2008 Battelle Memorial Institute

clock {
	timestamp '2000-01-01 0:00:00';
	timezone PST+8PDT;
}

#set profiler=1

//#define stylesheet=C:/Dell/gridlabd-mine2
//#include "WA-Yakima.glm"

module market;
module tape;
module residential;
module powerflow;
module climate;


object overhead_line_conductor:100 {
	geometric_mean_radius 0.0244;
	resistance 0.306;
}

object overhead_line_conductor:101 {
	geometric_mean_radius 0.00814;
	resistance 0.592;
}

object line_spacing:200 {
	distance_AB 2.5;
	distance_BC 4.5;
	distance_AC 7.0;
	distance_AN 5.656854;
	distance_BN 4.272002;
	distance_CN 5.0;
}

object line_configuration:300 {
	conductor_A overhead_line_conductor:100;
	conductor_B overhead_line_conductor:100;
	conductor_C overhead_line_conductor:100;
	conductor_N overhead_line_conductor:101;
	spacing line_spacing:200;
}

object triplex_line_configuration:600 {
     conductor_1 object triplex_line_conductor {
          resistance 0.97;
          geometric_mean_radius 0.0111;
     };

     conductor_2 object triplex_line_conductor {
          resistance 0.97;
          geometric_mean_radius 0.0111;
     };
     conductor_N object triplex_line_conductor {
          resistance 0.97;
          geometric_mean_radius 0.0111;
     };
     insulation_thickness 0.08;
     diameter 0.368;
}


//// Use each of these configurations as needed for which phase you want to use
object transformer_configuration:500 {
		connect_type SINGLE_PHASE_CENTER_TAPPED;
		install_type POLETOP;
		powerA_rating 15;
		resistance 0.011;
		reactance 0.018;
		primary_voltage 2401.777;
		secondary_voltage 120.000;
}

object transformer_configuration:501 {
		connect_type SINGLE_PHASE_CENTER_TAPPED;
		install_type POLETOP;
		powerB_rating 15;
		resistance 0.011;
		reactance 0.018;
		primary_voltage 2401.777;
		secondary_voltage 120.000;
}

object transformer_configuration:502 {
		connect_type SINGLE_PHASE_CENTER_TAPPED;
		install_type POLETOP;
		powerC_rating 15;
		resistance 0.011;
		reactance 0.018;
		primary_voltage 2401.777;
		secondary_voltage 120.000;
}
////


object transformer_configuration:400 {
	connect_type WYE_WYE;
	install_type VAULT;
	power_rating 6000;
	powerA_rating 2000;
	powerB_rating 2000;
	powerC_rating 2000;
	primary_voltage 12470;
	//secondary_voltage 24900;
	secondary_voltage 12470;
	resistance 0.01;
	reactance 0.06;
	
}

object meter {
	name hv_node1;
	phases ABCN;
	nominal_voltage 2401.777;
	object recorder {
		file "feeder_power.csv";
		interval 60;
		limit 1440;
		property measured_real_power,measured_reactive_power;
	};
}

object node {
	name hv_node2;
	phases ABCN;
	voltage_A 2401.777;
	nominal_voltage 2401.777;
}

object transformer:23 {
	phases "ABCN";
	from hv_node1;
	to hv_node2;
	configuration transformer_configuration:400;
}

object overhead_line {
	phases "ABCN";
	name OHL23;
	from hv_node2;
	to hv_node3;
	length 2500;
	configuration line_configuration:300;
}

object triplex_line {
	configuration triplex_line_configuration:600;
	length 100;
	phases AS;
	from triplex_node1;
	to object triplex_meter {
		phases AS;
		nominal_voltage 120;
		name triplex_meter1;
		
	};
	
}

object transformer {
	phases AS;
	configuration transformer_configuration:500;
	from object meter {
		name hv_node3;
		phases ABCN;
		voltage_A 2401.777;
		nominal_voltage 2401.777;
		
	};
	to triplex_node1;
	nominal_voltage 2401.777;
	object recorder {
		file "trans.csv";
		interval 60;
		limit 1440;
		property power_losses;
	};
}

object triplex_node {
	name triplex_node1;
	nominal_voltage 120;
	phases AS;
	object recorder {
		file "TN.csv";
		interval 60;
		limit 1440;
		property voltage_12;
	};
}

object house {
	parent triplex_meter1;
	floor_area 1500 sf;
	heating_setpoint 68.0 degF;
	cooling_setpoint 75.0 degF;
	thermostat_deadband 1.0 degF;
	heat_mode GASHEAT;
	object lights {
		type INCANDESCENT;
		installed_power 1000;
//		object player {
//			file "lights.player";
//			loop 1;			
//			property demand;
//		};
		object recorder {
			file "lights_power.csv";
			interval 60;
			limit 1440;
			property enduse_load.real,enduse_load.imag,;
		};
	};
	object waterheater {
		tank_volume 50;
		location INSIDE;
		tank_setpoint 135;
		thermostat_deadband 5;
		tank_UA 2.0;
		heating_element_capacity 4500;
		object player {
			file "waterheater_demand_waveform_sine.player";
			loop 1;
			property water_demand;
		};
		object recorder {
			file "waterheater_power_odd.csv";
			interval 1;
			//limit 14400;
			limit 31900;
			property enduse_load.real,enduse_load.imag,heating_element_capacity,constant_power[kW],constant_current[A],constant_admittance[1/Ohm],internal_gains[kW],height[ft],temperature[degF],water_demand[gpm];
		};
	};
	
//	object plugload {
//		constant_power 500;
//		object player {
//			file "plugload.player";
//			loop 1;
//			property demand;
//		};
//		object recorder {
//			file "plugload_power.csv";
//			interval 60;
//			limit 1440;
//			property enduse_load.real,enduse_load.imag;
//		};
//	};
	object recorder {
		property total_load.real,total_load.imag;
		file "house_power.csv";
		interval 60;
		limit 1440;
	};
}


